@model IEnumerable<Proyecto_CineClub.Models.ViewModels.AsientoPurchase>
@{
    ViewBag.Title = "Seleccionar Asientos";
}

<h2>Seleccionar Asientos</h2>

<form method="post" action="@Url.Action("SeleccionarAsientos", "TicketPurchase")">
    <div class="container">
        <div class="row">
            <div class="col-12 mb-3">
                <div class="screen">Pantalla</div>
            </div>
        </div>

        <div class="row">
            @foreach (var item in Model)
            {
                var seatClass = item.Disponibilidad ? "btn btn-secondary m-1" : "btn btn-danger m-1";

                <div class="col-2 text-center mb-2">
                    <input type="checkbox" name="asientosSeleccionados" id="asiento_@item.IdAsiento" value="@item.IdAsiento" class="d-none" @(item.Disponibilidad ? "" : "disabled") />
                    <label for="asiento_@item.IdAsiento" class="@seatClass">
                        @item.IdAsiento
                    </label>
                </div>
            }
        </div>

        <div class="row mt-4">
            <div class="col-12 text-center">
                <input type="hidden" name="id_funcion" value="@ViewBag.id_funcion" />
                <button type="submit" class="btn button-style">Confirmar Selección</button>
            </div>
        </div>
        <br />
    </div>
</form>

<style>
    .screen {
        width: 100%;
        height: 30px;
        background-color: #ccc;
        border-radius: 5px;
        text-align:center;        
    }

    .selected-seat {
        background-color: green !important; /* Color para los asientos seleccionados */
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const checkboxes = document.querySelectorAll('input[type="checkbox"][name="asientosSeleccionados"]');
        checkboxes.forEach(function (checkbox) {
            checkbox.addEventListener('change', function () {
                const label = document.querySelector(`label[for="${checkbox.id}"]`);
                if (checkbox.checked) {
                    label.classList.add('selected-seat');
                } else {
                    label.classList.remove('selected-seat');
                }
            });
        });
    });
</script>
